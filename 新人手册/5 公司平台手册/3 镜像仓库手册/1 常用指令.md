[TOC]


# 1	基础操作

### 1.1 登录镜像仓库

```shell
sudo docker login mirrors.speedbot.net # 注意：第一次登陆后，本地会保存账号密码，第二次使用该指令可直接登录
sudo docker login -u username mirrors.speedbot.net # username换成你的账户名，指定用户登录
```

### 1.2 上传镜像

请依据场景**替换大写英文**

```shell
#对要上传的镜像打上tag，
docker tag SOURCE_IMAGE[:TAG] mirrors.speedbot.net/PROJECT_NAME/REPOSITORY[:TAG]
#删除tag
docker rmi mirrors.speedbot.net/PROJECT_NAME/REPOSITORY[:TAG]
#上传镜像
docker push mirrors.speedbot.net/PROJECT_NAME/REPOSITORY[:TAG]
```

### 1.3 下载镜像

请依据场景**替换大写英文**

```shell
docker push mirrors.speedbot.net/PROJECT_NAME/REPOSITORY[:TAG
```

### 1.4 启动容器

使用镜像 nginx:latest 以后台模式启动一个容器,将容器的 8000 端口映射到主机的 80 端口,主机的目录 ~/data 映射到容器的 /data。

```shell
docker run -p 8000:80 -v ~/data:/data -d nginx:latest
```

### 1.5 进入容器

使用镜像 nginx:latest 以交互模式启动一个容器,在容器内执行/bin/bash命令。

```shell
docker run -it nginx:latest /bin/bash
```

# 2 导入 & 导出 镜像

### 2.1 导出镜像

**查看镜像**

```shell
docker images
```

**导出镜像**

```shell
docker save -o test.tar image_name
# 或
docker save image_name > /test.tar
```

**导出容器**

命令格式为：

docker export [-o|--output[=""]] CONTATINER
或：
docker export 容器id/name >文件名.tar

例如：

```shell
docker export -o test.img test
　　test.img : 这里可以导出tar文件 ， 也可以导出二进制镜像文件img
　　test : 需要导出的容器名， 通过docker ps查看
```

```shell
docker export -o test.img test
　　test.img : 这里可以导出tar文件 ， 也可以导出二进制镜像文件img
　　test : 需要导出的容器名， 通过docker ps查看
```

### 2.2 导入压缩包[镜像 | 容器]

#### 2.2.1 保存镜像
**docker save** : 将指定镜像保存成 tar 归档文件，并保存在本机。

```shell
docker save [OPTIONS] IMAGE [IMAGE...]
```

OPTIONS 说明：
- -o :输出到的文件。

例如，将speedbot/mixsort:v1 镜像保存在本机

```shell
docker save -o mixsort.tar speedbot/mixsort:v1
或
docker load speedbot/mixsort:v1 > mixsort.tar
```

#### 2.2.2 导入镜像
**docker load** : 导入使用 docker save 命令导出的镜像。

	docker load [OPTIONS]

OPTIONS 说明：
- --input , -i : 指定导入的文件，代替 STDIN。

- --quiet , -q : 精简输出信息。

例如，导入上一步生成的tar文件

```shell
docker load < mixsort.tar
或
docker load -i mixsort.tar
```

#### 2.2.3 生成镜像（dockerfile）
**docker build **:用于使用 Dockerfile 创建镜像

```shell
docker build [OPTIONS] PATH | URL | -
```

使用当前目录的 Dockerfile 创建镜像，标签为 runoob/ubuntu:v1。

```shell
docker build -t runoob/ubuntu:v1 .
```

也可以通过 -f Dockerfile 文件的位置：

```shell
docker build -f /path/to/a/Dockerfile .
```

# 3 容器提交为镜像

```shell
docker commit my_container my_image:tag
```

# 4 关闭docker --restart=always

```shell
docker update --restart=no <container-id>
docker stop <container-id>
```

