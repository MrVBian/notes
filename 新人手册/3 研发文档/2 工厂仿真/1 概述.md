[TOC]

# 0 概述

PlantSim是一个基于过程的离散事件仿真框架，基于C#。理论上保留了PlantSim进行连续仿真的开发拓展能力。

PlanSim中的主程序Core.cs由Unity协程执行，进而确保并行不卡顿。PlantSim的每个节点驱动基于状态机原理，每个节点通常含有两个状态，OnEnter和OnExit。节点按照功能进行了大致分类：

- 始末节点：物料源(物料产生)、物料汇(物料结束)
- 执行节点：执行器、条件执行器(带约束条件)、优先级执行器(含优先级)
- 缓存节点：缓存、限制缓存
- 逻辑节点：合并器、分离器、并行器

若需要创建新的节点，需要集成自PlantSimModelBase.cs脚本，并重写OnEnter和OnExit方法

# 1 原理

- 用户通过拖拉拽节点，**构建工作流**，明确任务驱动的流向。**每个节点含优先级参数，遵从升序优先原则**。
- 在**物料源**节点，会根据用户的自定义参数配置，**生成n个SimTask(仿真事件)**。**每个仿真事件含事件优先级、SpeedEvent事件(事件执行状态、物料数据)**。
- 仿真事件按照工作流方向，**以时间升序顺序依次执行**。由于仿真事件中包含了物料数据，**不同节点会根据物料数据做出不同的决策**，进而产生不同的处理时间，从而完成离散事件仿真