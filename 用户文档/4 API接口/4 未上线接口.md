[TOC]


# 1 桁架

**请求方式：MQTT**
**Topics：robot/truss/truss_id**（truss_id是变量）
**指令说明：桁架设备数采的数据通信接口**

```json
{
    "robots": [{
            "id": "id1",
            "joint_state": [0, 0, 0, 0],
            // 256个bool
            "io_state": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        },
        {
            "id": "id2",
            "joint_state": [0, 0, 0, 0],
            // 每个数取值0~255，代表八个位。默认：16组，128位。支持可变长数组，后续延展用
			"io_state": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        }
    ]
}
```

| 参数        | 参数类型 | 说明                         | 实例值              |
| ----------- | -------- | ---------------------------- | ------------------- |
| id          | string   | 单个臂的id                   | device1             |
| joint_state | float[]  | 预留六个关节的关节值，单位mm | [10,20,30,40,50,60] |
| io_state    | bool[]   | 256个bool                    | [false, false]      |

# 2 机器人轨迹点

```json
{
  "robots": [
    {
      "robot_brand": "ABB",
      "tracing_point": [
        {
          "group_id": "第一组",
          "description": "拍照点",
          "number": 1,
          "tcp_id": 1,
          "tcp_offset_leftY": [0, 0, 0, 0, 0, 0],
          "tcp_offset_rightZ": [0, 0, 0, 0, 0, 0],
          "vertex_type": 1, // 点位类型 1:普通点；2:过渡点；
          "rectangular_coordinates": [1200, 0, 500, 180, 0, 0],
          "joint_coordinate": [0, 0, 0, 0, 0, 0]// 可变长，可能超过六轴，例如地轨
        }
      ]
    }
  ]
}

```

| 参数                    | 参数类型 | 说明                                                         | 实例值                          |
| ----------------------- | -------- | ------------------------------------------------------------ | ------------------------------- |
| robots                  | object[] | 包含机器人信息的数组                                         | 机器人信息                      |
| robot_brand             | string   | 机器人品牌                                                   | "ABB"                           |
| tracing_point           | object[] | 包含轨迹点信息的数组                                         | 轨迹点信息                      |
| group_id                | string   | 轨迹点所属的分组id                                           | "第一组"                        |
| description             | string   | 轨迹点描述信息                                               | "拍照点"                        |
| number                  | int      | 轨迹点的编号[1, 轨迹点数量]                                  | 1                               |
| tcp_id                  | int      | 工具坐标系编号[1,16]                                         | 1                               |
| tcp_offset_leftY        | float[]  | 相对于机器人坐标系的TCP偏移量,Unity左手系Y朝上,[x, y, z, rx, ry, rz] | [1200f, 0f, 500f, 180f, 0f, 0f] |
| tcp_offset_rightZ       | float[]  | 相对于机器人右手坐标系的TCP偏移量，右手系Z朝上,[x, y, z, rx, ry, rz] | [600f, 0f, 600f, 180f, 0f, 0f]  |
| vertex_type             | int      | 轨迹点类型。1:普通点；2:过渡点                               | 1                               |
| rectangular_coordinates | float[]  | 直角坐标值[x,y,z,rx,ry,rz]                                   | [1200, 0, 500, 180, 0, 0]       |
| joint_coordinate        | float[]  | 关节坐标值[lin1, link2, ..., linkn]，可变长，可能超过六轴，例如地轨 | [0, 0, ..., 0]                  |

# 3 漆面检测
## 1 气缸

**请求方式：POST(HTTP)**
**URL：http://127.0.0.1:16888/motion/IndustrialEquipment**
**指令说明：下发气缸控制信号**

```json
{
    "id": "",
    "type": 8,
    "command": 0
}
```

| 参数    | 参数类型 | 说明                                                | 实例值                                    |
| ------- | -------- | --------------------------------------------------- | ----------------------------------------- |
| id      | string   | 气缸id                                              | ""                                        |
| type    | string   | 执行单元                                            | "2"(升降气缸) "8"(翻转气缸) "3"(平移气缸) |
| command | int      | 到位前的信号命令： 0:停止; 1:正向运动; 2:反向运动； | 0                                         |

**返回值：**


```json
{
    "code": 200,
    "msg": "OK"
}
```

| 参数 | 参数类型 | 说明                   | 实例值                         |
| ---- | -------- | ---------------------- | ------------------------------ |
| code | int      | 返回码                 | 200为接口响应成功；400为失败   |
| msg  | string   | 对返回码的文本描述内容 | 若执行失败，返回的具体错误信息 |

**到位信号**
**请求方式：POST(HTTP)**
**URL：/motion/IndustrialEquipment**
**指令说明：到位信号**

```json
{
    "id": "",
    "type": 8,
    "command": 0
}
```

| 参数    | 参数类型 | 说明                                               | 实例值                                    |
| ------- | -------- | -------------------------------------------------- | ----------------------------------------- |
| id      | string   | 气缸id                                             | ""                                        |
| type    | string   | 执行单元                                           | "2"(升降气缸) "8"(翻转气缸) "3"(平移气缸) |
| command | int      | 到位前的信号命令： 0:停止; 1:正向运动; 2:反向运动; | 0                                         |

## 2 汽车输送到位信号

**到位信号**
**请求方式：POST(HTTP)**
**URL：/motion/sensor**
**指令说明：到位信号**

```json
{
    "id": "",
	"status": 1
}
```

| 参数   | 参数类型 | 说明                        | 实例值 |
| ------ | -------- | --------------------------- | ------ |
| id     | string   | 传感器id                    | ""     |
| status | int      | 1：检测到进入； 2检测到离开 | 1      |

**返回值：**


```json
{
    "code": 200,
    "msg": "OK"
}
```